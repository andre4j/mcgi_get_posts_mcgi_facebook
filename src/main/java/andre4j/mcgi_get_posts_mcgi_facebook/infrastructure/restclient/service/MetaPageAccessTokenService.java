package andre4j.mcgi_get_posts_mcgi_facebook.infrastructure.restclient.service;

import org.springframework.stereotype.Service;

import andre4j.mcgi_get_posts_mcgi_facebook.infrastructure.restclient.dto.PageAccessPayloadDTO;
import andre4j.mcgi_get_posts_mcgi_facebook.infrastructure.restclient.dto.UserFieldTokenDTO;
import andre4j.mcgi_get_posts_mcgi_facebook.infrastructure.restclient.feign.GetPageAccessTokenFeign;

@Service
public class MetaPageAccessTokenService {
    private final GetPageAccessTokenFeign getPageAccessTokenFeign;
    private final UserFieldTokenDTO userFieldTokenDTO;

    public MetaPageAccessTokenService(
            GetPageAccessTokenFeign getPageAccessTokenFeign,
            UserFieldTokenDTO userFieldTokenDTO) {
        this.getPageAccessTokenFeign = getPageAccessTokenFeign;
        this.userFieldTokenDTO = userFieldTokenDTO;
    }

    public PageAccessPayloadDTO getPageID() {
        return getPageAccessTokenFeign
                .getPageAccessToken(userFieldTokenDTO.access_token());
    }
}
